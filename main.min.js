const e={ar:["ar","arb"],"zh-cn":["zh-tw","cmn-CN"],da:["da","da-DK"],nl:["nl","nl-NL"],en:["en","en-US"],fr:["fr","fr-FR"],de:["de","de-DE"],is:["is","is-IS"],it:["it","it-IT"],ja:["ja","ja-JP"],ko:["ko","ko-KR"],nb:["nb","nb-NO"],pl:["pl","pl-PL"],pt:["pt","pt-PT"],ro:["ro","ro-RO"],ru:["ru","ru-RU"],es:["es","es-ES"],sv:["sv","sv-SE"],tr:["tr","tr-TR"],cy:["cy","cy-GB"],ca:["ca","ca-CA"]};function t(t,n,s){t.addEventListener("click",(()=>{let t=e[s.value][1];const a=new Audio;a.src="https://synthesis-service.scratch.mit.edu/synth?"+new URLSearchParams({locale:t,gender:"female",text:n.value}),a.controls=!0,n.parentNode.append(a),"cmn-CN"===t&&(t="zh-TW");const c=speechSynthesis.getVoices().find((e=>e.lang===t||e.lang.slice(0,2)===t.slice(0,2))),l=new SpeechSynthesisUtterance(n.value);l.lang=t,l.voice=c,window.speechSynthesis.speak(l)}))}speechSynthesis.getVoices(),document.getElementById("translate").addEventListener("click",(async()=>{const{result:t}=await fetch("https://translate-service.scratch.mit.edu/translate?"+new URLSearchParams({language:e[document.getElementById("target-language").value][0],text:document.getElementById("source").value})).then((e=>e.json()));document.getElementById("translated").value=t})),t(document.getElementById("source-speech"),document.getElementById("source"),document.getElementById("source-language")),t(document.getElementById("translated-speech"),document.getElementById("translated"),document.getElementById("target-language"));var n,s,a,c,l,i,d,r,o;document.getElementById("myVideo"),document.getElementById("myBtn");for(c=(n=document.getElementsByClassName("custom-select")).length,s=0;s<c;s++){for(l=(i=n[s].getElementsByTagName("select")[0]).length,(d=document.createElement("DIV")).setAttribute("class","select-selected"),d.innerHTML=i.options[i.selectedIndex].innerHTML,n[s].appendChild(d),(r=document.createElement("DIV")).setAttribute("class","select-items select-hide"),a=1;a<l;a++)(o=document.createElement("DIV")).innerHTML=i.options[a].innerHTML,o.addEventListener("click",(function(e){var t,n,s,a,c,l,i;for(l=(a=this.parentNode.parentNode.getElementsByTagName("select")[0]).length,c=this.parentNode.previousSibling,n=0;n<l;n++)if(a.options[n].innerHTML==this.innerHTML){for(a.selectedIndex=n,c.innerHTML=this.innerHTML,i=(t=this.parentNode.getElementsByClassName("same-as-selected")).length,s=0;s<i;s++)t[s].removeAttribute("class");this.setAttribute("class","same-as-selected");break}c.click()})),r.appendChild(o);n[s].appendChild(r),d.addEventListener("click",(function(e){e.stopPropagation(),m(this),this.nextSibling.classList.toggle("select-hide"),this.classList.toggle("select-arrow-active")}))}function m(e){var t,n,s,a,c,l=[];for(t=document.getElementsByClassName("select-items"),n=document.getElementsByClassName("select-selected"),a=t.length,c=n.length,s=0;s<c;s++)e==n[s]?l.push(s):n[s].classList.remove("select-arrow-active");for(s=0;s<a;s++)l.indexOf(s)&&t[s].classList.add("select-hide")}document.addEventListener("click",m);
